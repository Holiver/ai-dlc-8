# 需求文档

## 简介

AWSomeShop 是一个内部员工福利电商网站，旨在通过最小可行产品（MVP）验证员工积分兑换系统的商业模式。员工可以使用"AWSome积分"浏览和兑换预选产品，管理员可以配置产品信息并管理员工积分。

## 术语表

- **系统（System）**: AWSomeShop 员工福利电商平台
- **员工（Employee）**: 使用积分兑换产品的普通用户
- **管理员（Administrator）**: 具有产品管理和积分管理权限的用户
- **积分（Points）**: AWSome积分，用于兑换产品的虚拟货币单位
- **产品（Product）**: 可供员工使用积分兑换的商品
- **兑换订单（Redemption_Order）**: 员工使用积分兑换产品后生成的订单记录
- **积分变动记录（Points_Transaction）**: 记录积分发放、扣除、兑换消耗的历史记录

## 需求

### 需求 1：用户账户管理

**用户故事：** 作为管理员，我希望能够创建和管理员工账户，以便员工可以登录系统使用积分兑换产品。

#### 验收标准

1. THE 系统 SHALL 允许管理员创建员工账户，包含姓名、邮箱、手机号和初始密码
2. WHEN 管理员创建账户时，THE 系统 SHALL 将初始密码设置为手机号后6位
3. THE 系统 SHALL 使用邮箱作为员工的唯一标识
4. WHEN 员工首次登录时，THE 系统 SHALL 自动发放1000积分
5. THE 系统 SHALL 允许员工修改手机号
6. THE 系统 SHALL 禁止员工修改邮箱
7. WHEN 管理员将员工账户设置为离职状态时，THE 系统 SHALL 将该员工的积分置为失效状态

**用户故事：** 作为员工，我希望能够安全地登录系统，以便访问我的积分和兑换产品。

#### 验收标准

1. THE 系统 SHALL 提供独立的登录功能
2. WHEN 用户输入邮箱和密码时，THE 系统 SHALL 验证凭据的有效性
3. IF 凭据无效，THEN THE 系统 SHALL 显示错误提示并拒绝登录
4. WHEN 用户成功登录时，THE 系统 SHALL 根据用户角色显示相应的功能界面
5. THE 系统 SHALL 通过系统配置确定用户是否为管理员

---

### 需求 3：产品浏览和展示

**用户故事：** 作为员工，我希望能够浏览可兑换的产品，以便选择我想要的商品。

#### 验收标准

1. THE 系统 SHALL 以平铺列表方式展示所有已上架的产品
2. WHEN 展示产品时，THE 系统 SHALL 显示产品名称、产品图片和所需积分
3. WHEN 产品库存为0时，THE 系统 SHALL 显示该产品但标注"已售罄"状态
4. WHEN 产品状态为"已售罄"时，THE 系统 SHALL 禁止员工兑换该产品
5. THE 系统 SHALL 隐藏已下架的产品，不向员工展示

---

### 需求 4：产品兑换

**用户故事：** 作为员工，我希望能够使用积分兑换产品，以便获得我需要的商品。

#### 验收标准

1. WHEN 员工选择兑换产品时，THE 系统 SHALL 验证员工的积分余额是否充足
2. IF 积分余额不足，THEN THE 系统 SHALL 显示"积分不足"提示并阻止兑换
3. WHEN 员工选择兑换产品时，THE 系统 SHALL 验证产品库存是否充足
4. IF 产品库存不足，THEN THE 系统 SHALL 显示"库存不足"提示并阻止兑换
5. WHEN 多个员工同时兑换同一产品时，THE 系统 SHALL 按先到先得原则处理库存竞争
6. WHEN 兑换成功时，THE 系统 SHALL 扣除相应积分并减少产品库存
7. WHEN 兑换成功时，THE 系统 SHALL 创建兑换订单，初始状态为"备货中"
8. WHEN 兑换成功时，THE 系统 SHALL 自动确认订单，无需管理员审核
9. THE 系统 SHALL 禁止员工取消已提交的兑换订单

---

### 需求 5：积分余额查询

**用户故事：** 作为员工，我希望能够查看我的当前积分余额，以便了解我可以兑换哪些产品。

#### 验收标准

1. THE 系统 SHALL 在用户界面显著位置显示员工的当前积分余额
2. WHEN 积分发生变动时，THE 系统 SHALL 实时更新显示的积分余额
3. THE 系统 SHALL 确保积分余额为整数，最小单位为1积分

---

### 需求 6：兑换历史查询

**用户故事：** 作为员工，我希望能够查看我的兑换历史，以便了解我过去兑换了哪些产品。

#### 验收标准

1. THE 系统 SHALL 允许员工查看自己的兑换历史
2. WHEN 显示兑换历史时，THE 系统 SHALL 显示兑换时间、产品名称、积分消耗、兑换时的积分余额和订单状态
3. THE 系统 SHALL 支持订单状态包括"备货中"和"已发放"
4. THE 系统 SHALL 按兑换时间倒序显示兑换历史

---

### 需求 7：积分变动历史查询

**用户故事：** 作为员工，我希望能够查看我的积分变动历史，以便了解我的积分来源和使用情况。

#### 验收标准

1. THE 系统 SHALL 允许员工查看自己的积分变动历史
2. WHEN 显示积分变动历史时，THE 系统 SHALL 显示时间、变动类型、变动数量、当时余额和备注
3. THE 系统 SHALL 支持变动类型包括"发放"和"兑换消耗"
4. THE 系统 SHALL 以分页方式显示积分变动历史，每页20条记录
5. THE 系统 SHALL 按时间倒序显示积分变动历史

---

### 需求 8：产品管理

**用户故事：** 作为管理员，我希望能够配置产品信息，以便员工可以兑换这些产品。

#### 验收标准

1. THE 系统 SHALL 允许管理员创建产品，包含产品名称、产品图片、所需积分、库存数量
2. THE 系统 SHALL 限制每个产品最多上传1张图片
3. THE 系统 SHALL 允许管理员编辑已有产品的信息
4. THE 系统 SHALL 允许管理员调整产品的积分价格
5. WHEN 管理员调整产品积分价格时，THE 系统 SHALL 确保不影响已有的兑换订单
6. THE 系统 SHALL 允许管理员上架和下架产品
7. WHEN 产品被下架时，THE 系统 SHALL 对员工隐藏该产品

---

### 需求 9：积分发放

**用户故事：** 作为管理员，我希望能够向员工发放积分，以便奖励员工的工作表现。

#### 验收标准

1. THE 系统 SHALL 允许管理员向指定员工发放积分
2. WHEN 管理员发放积分时，THE 系统 SHALL 要求填写发放备注
3. THE 系统 SHALL 允许管理员批量发放积分
4. WHEN 批量发放积分时，THE 系统 SHALL 接受Markdown表格格式，包含员工邮箱、姓名、积分和备注字段
5. IF 批量操作中任何数据格式错误，THEN THE 系统 SHALL 回滚全部操作并显示错误信息
6. WHEN 积分发放成功时，THE 系统 SHALL 记录积分变动历史

---

### 需求 10：积分扣除

**用户故事：** 作为管理员，我希望能够扣除员工的积分，以便纠正误发放的积分。

#### 验收标准

1. THE 系统 SHALL 允许管理员扣除指定员工的积分
2. WHEN 管理员扣除积分时，THE 系统 SHALL 要求填写扣除备注
3. THE 系统 SHALL 验证扣除后的积分余额不能为负数
4. IF 扣除操作导致积分余额为负数，THEN THE 系统 SHALL 拒绝操作并显示错误提示
5. WHEN 积分扣除成功时，THE 系统 SHALL 记录积分变动历史

---

### 需求 11：订单管理

**用户故事：** 作为管理员，我希望能够管理兑换订单的状态，以便跟踪订单的处理进度。

#### 验收标准

1. THE 系统 SHALL 允许管理员查看所有兑换订单
2. THE 系统 SHALL 允许管理员手动更新订单状态从"备货中"到"已发放"
3. THE 系统 SHALL 允许管理员批量更新订单状态
4. WHEN 批量更新订单状态时，THE 系统 SHALL 接受订单号列表作为输入

---

### 需求 12：批量导入产品

**用户故事：** 作为管理员，我希望能够批量导入产品，以便快速添加多个产品。

#### 验收标准

1. THE 系统 SHALL 允许管理员批量导入产品
2. WHEN 批量导入产品时，THE 系统 SHALL 接受Markdown表格格式，包含商品名称（中英文）、商品主图和商品数量字段
3. IF 批量操作中任何数据格式错误，THEN THE 系统 SHALL 回滚全部操作并显示错误信息
4. WHEN 批量导入成功时，THE 系统 SHALL 创建所有产品记录

---

### 需求 13：统计报表

**用户故事：** 作为管理员，我希望能够查看统计报表，以便了解积分发放和兑换情况。

#### 验收标准

1. THE 系统 SHALL 提供积分发放表，显示发放时间、发放人姓名、发放人邮箱和发放积分数量
2. THE 系统 SHALL 提供积分存量表，显示员工姓名、员工邮箱和积分余额
3. THE 系统 SHALL 提供兑换记录表，显示兑换商品名称、兑换商品ID、兑换人姓名、兑换人邮箱、兑换时间、消耗积分数量和订单状态
4. THE 系统 SHALL 允许管理员导出统计报表数据

---

### 需求 14：响应式设计

**用户故事：** 作为员工，我希望能够在移动设备上访问系统，以便随时随地查看和兑换产品。

#### 验收标准

1. THE 系统 SHALL 支持响应式设计，适配桌面端和移动端
2. WHEN 用户在移动设备上访问时，THE 系统 SHALL 自动调整界面布局以适应屏幕尺寸
3. THE 系统 SHALL 确保移动端的所有功能与桌面端保持一致

---

### 需求 15：性能要求

**用户故事：** 作为员工，我希望系统响应迅速，以便快速完成兑换操作。

#### 验收标准

1. THE 系统 SHALL 确保页面加载时间小于2秒
2. THE 系统 SHALL 在正常负载下（100个并发用户）保持响应时间小于2秒
3. THE 系统 SHALL 优化数据库查询以提高性能

---

### 需求 16：系统可用性

**用户故事：** 作为系统管理员，我希望系统保持高可用性，以便员工可以随时访问。

#### 验收标准

1. THE 系统 SHALL 达到99.9%的可用性目标
2. THE 系统 SHALL 实施数据备份策略，遵循业内通用规范
3. THE 系统 SHALL 提供数据恢复机制

---

### 需求 17：积分系统规则

**用户故事：** 作为系统，我需要遵循积分系统的业务规则，以确保积分管理的正确性。

#### 验收标准

1. THE 系统 SHALL 为新员工首次登录时自动发放1000初始积分
2. THE 系统 SHALL 确保积分无有效期限制
3. THE 系统 SHALL 禁止员工之间转让积分
4. THE 系统 SHALL 记录所有积分变动的详细历史，包括发放、扣除和兑换消耗
5. THE 系统 SHALL 确保积分的最小单位为1积分，不支持小数
